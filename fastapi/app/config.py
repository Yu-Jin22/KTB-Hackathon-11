"""
애플리케이션 설정 모듈.

환경변수 및 상수를 중앙에서 관리합니다.
"""
import os
from pathlib import Path

from dotenv import load_dotenv

load_dotenv()

# =============================================================================
# 디렉토리 설정
# =============================================================================
BASE_DIR = Path(__file__).resolve().parent.parent
DATA_DIR = BASE_DIR / "data"
LOG_DIR = DATA_DIR / "logs"

DATA_DIR.mkdir(exist_ok=True)
LOG_DIR.mkdir(exist_ok=True)

# =============================================================================
# CORS 설정
# =============================================================================
CORS_ORIGINS = [
    "http://localhost:5173",
    "http://localhost:3000",
]

# =============================================================================
# OpenAI API 설정
# =============================================================================
OPENAI_API_KEY = os.getenv("OPENAI_API_KEY")

# 용도별 모델 설정
OPENAI_MODEL_GPT4O = "gpt-4.1-mini"      # 레시피 파싱용 (LLM)
OPENAI_MODEL_CHAT = "gpt-4o"              # 챗봇용 (VLM, 이미지 분석 지원)

# =============================================================================
# 작업 관리 설정
# =============================================================================
MAX_JOBS = int(os.getenv("MAX_JOBS", "100"))
JOB_EXPIRE_HOURS = int(os.getenv("JOB_EXPIRE_HOURS", "24"))

# =============================================================================
# 오디오 파일 설정
# =============================================================================
SUPPORTED_AUDIO_FORMATS = [
    ".mp3", ".mp4", ".mpeg", ".mpga", ".m4a", ".wav", ".webm"
]
MAX_AUDIO_FILE_SIZE = 25 * 1024 * 1024  # 25MB (Whisper API 제한)

# =============================================================================
# 레시피 파싱 설정
# =============================================================================
MIN_TRANSCRIPT_LENGTH = 20  # 최소 전사 텍스트 길이
